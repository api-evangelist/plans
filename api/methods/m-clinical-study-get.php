<?php$route = '/clinical_study/';$app->get($route, function ()  use ($app){	$request = $app->request();	$_GET = $request->params();	if(isset($_GET['query'])){ $query = $_GET['query']; } else { $query = '';}	if(isset($_GET['sort'])){ $sort = $_GET['sort']; } else { $sort = '';}	if(isset($_GET['page'])){ $page = $_GET['page']; } else { $page = 0;}	if(isset($_GET['count'])){ $count = $_GET['count']; } else { $count = 25;}	if(isset($_GET['in'])){ $in = $_GET['in']; } else { $in = '';}	$ReturnObject = array();	$Where = "ID IS NOT NULL";	if($in != '')		{		$inArray = explode(',',$in);		foreach($inArray as $item)			{			$Where .= " OR " . $item . " LIKE '%" . $query . "%'";			}		}	if($query=='')		{		$Query = "SELECT * FROM clinical_study WHERE " . $Where ;		}	else		{		$Query = "SELECT * FROM clinical_study";		}	if($sort!='')		{		$Query .= " ORDER BY " . $sort . " ASC";		}	$Query .= " LIMIT " . $page . "," . $count;	$DatabaseResult = mysql_query($Query) or die('Query failed: ' . mysql_error());	while ($Database = mysql_fetch_assoc($DatabaseResult))		{		$ID = $Database['ID'];		$nct_id = $Database['nct_id'];		$download_date = $Database['download_date'];		$download_date_dt = $Database['download_date_dt'];		$org_study_id = $Database['org_study_id'];		$brief_title = $Database['brief_title'];		$official_title = $Database['official_title'];		$acronym = $Database['acronym'];		$source = $Database['source'];		$has_dmc = $Database['has_dmc'];		$brief_summary = $Database['brief_summary'];		$detailed_description = $Database['detailed_description'];		$overall_status = $Database['overall_status'];		$start_date = $Database['start_date'];		$completion_date = $Database['completion_date'];		$completion_date_type = $Database['completion_date_type'];		$primary_completion_date = $Database['primary_completion_date'];		$primary_completion_date_type = $Database['primary_completion_date_type'];		$phase = $Database['phase'];		$study_type = $Database['study_type'];		$study_design = $Database['study_design'];		$number_of_arms = $Database['number_of_arms'];		$number_of_groups = $Database['number_of_groups'];		$enrollment_type = $Database['enrollment_type'];		$enrollment = $Database['enrollment'];		$biospec_retention = $Database['biospec_retention'];		$biospec_descr = $Database['biospec_descr'];		$criteria = $Database['criteria'];		$gender = $Database['gender'];		$minimum_age = $Database['minimum_age'];		$maximum_age = $Database['maximum_age'];		$healthy_volunteers = $Database['healthy_volunteers'];		$sampling_method = $Database['sampling_method'];		$study_pop = $Database['study_pop'];		$verification_date = $Database['verification_date'];		$lastchanged_date = $Database['lastchanged_date'];		$firstreceived_date = $Database['firstreceived_date'];		$is_section_801 = $Database['is_section_801'];		$is_fda_regulated = $Database['is_fda_regulated'];		$why_stopped = $Database['why_stopped'];		$has_expanded_access = $Database['has_expanded_access'];		$firstreceived_results_date = $Database['firstreceived_results_date'];		$url = $Database['url'];		$target_duration = $Database['target_duration'];		$study_rank = $Database['study_rank'];		$limitations_and_caveats = $Database['limitations_and_caveats'];		$F = array();		$F['ID'] = $ID;		$F['nct_id'] = $nct_id;		$F['download_date'] = $download_date;		$F['download_date_dt'] = $download_date_dt;		$F['org_study_id'] = $org_study_id;		$F['brief_title'] = $brief_title;		$F['official_title'] = $official_title;		$F['acronym'] = $acronym;		$F['source'] = $source;		$F['has_dmc'] = $has_dmc;		$F['brief_summary'] = $brief_summary;		$F['detailed_description'] = $detailed_description;		$F['overall_status'] = $overall_status;		$F['start_date'] = $start_date;		$F['completion_date'] = $completion_date;		$F['completion_date_type'] = $completion_date_type;		$F['primary_completion_date'] = $primary_completion_date;		$F['primary_completion_date_type'] = $primary_completion_date_type;		$F['phase'] = $phase;		$F['study_type'] = $study_type;		$F['study_design'] = $study_design;		$F['number_of_arms'] = $number_of_arms;		$F['number_of_groups'] = $number_of_groups;		$F['enrollment_type'] = $enrollment_type;		$F['enrollment'] = $enrollment;		$F['biospec_retention'] = $biospec_retention;		$F['biospec_descr'] = $biospec_descr;		$F['criteria'] = $criteria;		$F['gender'] = $gender;		$F['minimum_age'] = $minimum_age;		$F['maximum_age'] = $maximum_age;		$F['healthy_volunteers'] = $healthy_volunteers;		$F['sampling_method'] = $sampling_method;		$F['study_pop'] = $study_pop;		$F['verification_date'] = $verification_date;		$F['lastchanged_date'] = $lastchanged_date;		$F['firstreceived_date'] = $firstreceived_date;		$F['is_section_801'] = $is_section_801;		$F['is_fda_regulated'] = $is_fda_regulated;		$F['why_stopped'] = $why_stopped;		$F['has_expanded_access'] = $has_expanded_access;		$F['firstreceived_results_date'] = $firstreceived_results_date;		$F['url'] = $url;		$F['target_duration'] = $target_duration;		$F['study_rank'] = $study_rank;		$F['limitations_and_caveats'] = $limitations_and_caveats;		array_push($ReturnObject, $F);		}	$app->response()->header("Content-Type", "application/json");	echo stripslashes(format_json(json_encode($ReturnObject)));	});?>